<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../app-layout/app-scroll-effects/app-scroll-effects-behavior.html">

<script>

  Polymer.AppLayout.registerEffect('parallax-back', {
    /**
     * @param {{scalar: string}} config
     */
    setUp: function setUp(config) {
      var scalar = parseFloat(config.scalar);
      if (isNaN(scalar)) {
        scalar = 0.2;
      }
      this._fxParallaxTransform = {
        scalar: (1 - Math.max(0, Math.min(1, scalar))),
        target: this._getDOMRef('backLayer')
      };
    },
    run: function run(p, y) {
      var fx = this._fxParallaxTransform;
      this.translate3d(0, y*fx.scalar  +'px', 0, fx.target);
    },
    tearDown: function tearDown() {
      delete this._fxParallaxTransform;
    }
  });
</script>
